parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Focm":[function(require,module,exports) {
var t=["ca","dk","gr","is","mx","ph","sv","ar","ch","do","gt","it","my","pl","th","at","cl","ec","hk","jp","pt","tr","au","co","hn","nl","py","tw","be","cr","es","hu","no","ro","us","fi","id","nz","se","uy","bo","cz","fr","ie","pa","sg","vn","br","de","gb","il","pe","sk","global"],e=["Canada","Denmark","Greece","Iceland","Mexico","Philippines","El Salvador","Argentina","Switzerland","Dominican Republic","Guatemala","Italy","Malaysia","Poland","Thailand","Austria","Chile","Ecuador","Hong Kong","Japan","Portugal","Turkey","Australia","Columbia","Honduras","Netherlands","Paraguay","Taiwan","Belgium","Costa Rica","Spain","Hungary","Norway","Romania","United States","Finland","Indonesia","New Zealand","Sweden","Uruguay","Bolivia","Czech Republic","France","Ireland","Panama","Singapore","Vietnam","Brazil","Germany","United Kingdom","Israel","Peru","Slovakia","global"],a=e.slice(0).sort();console.log(a);var n,r,i=1,l={top:15,right:25,bottom:30,left:10},o=800-l.left-l.right,s=460-l.top-l.bottom,d=d3.scaleBand().range([s-10,0]).padding(.1),c=d3.scaleLinear().range([0,o]),g=[],u=[],m=[];function p(){d3.csv("streamsglobal10.csv").then(function(n){slider.initSlider(),g=n;var r=n.filter(function(t){return t.date===slider.getDate()});f(),y(r),d3.select("#vis-container-country").insert("select","svg").on("change",function(){var a=d3.select(this).property("value"),n=e.indexOf(a),r="streams"+t[n]+"10.csv";"global"==t[n]?document.getElementById("flag").style.visibility="hidden":(document.getElementById("flag").src=t[n]+".svg",document.getElementById("flag").style.visibility="visible"),d3.csv(r).then(function(t){g=t,y(t.filter(function(t){return t.date===slider.getDate()}))})}).selectAll("option").data(a).enter().append("option").attr("value",function(t){return t}).attr("selected",function(t){return"Global"===t}).text(function(t){return t[0].toUpperCase()+t.slice(1,t.length)})})}function f(){svg=d3.select("div#graph").append("svg").attr("width",o+l.left+l.right).attr("height",s+l.top+l.bottom).append("g").attr("transform","translate("+l.left+","+l.top+")")}function h(t,e,a,n){m=[],svg.selectAll("text").remove(),svg.selectAll("g").remove(),svg.append("g").attr("transform","translate(0,"+(s-10)+")").attr("color","white").call(d3.axisBottom(c)),svg.append("text").attr("transform","translate("+o/2+" ,"+(s+l.top+10)+")").attr("fill","white").attr("font-family","sans-serif").attr("font-size","12px").style("text-anchor","middle").text("Streams"),svg.append("g").call(d3.axisLeft(d).tickSize(0).tickFormat("")),svg.selectAll("title").remove(),svg.selectAll("rect").append("title").text(function(e){var n=10-parseInt(e[1]);return'"'+t[n]+'" by '+a[n]+": "+e[0]+" streams on "+slider.getDate()}),svg.selectAll("text.value").data(e).enter().append("text").text(function(t){return n[parseInt(t[1])-1]}).attr("text-anchor","end").attr("y",function(t,a){return(9-a)*((s-14)/e.length)+26}).attr("x",function(t){var a=t[1],n=e[a-1][0];return c(n)-8}).each(function(t,e){var a=this.getComputedTextLength();m.push(a)}).attr("font-family","sans-serif").attr("font-size","12px").attr("font-weight",550).attr("fill","rgb(35, 35, 35)")}function v(t){u=[];var e=svg.selectAll("rect").data(t);e.enter().append("rect").attr("class","bar").attr("fill",function(){return"rgb(30, 215, 96)"}).merge(e).attr("x",function(t){return c(t[1])}).attr("y",function(t){return d(t[1])}).attr("width",function(t){return this.comp,u.push(c(t[0])),c(t[0])}).attr("height",d.bandwidth())}function y(t){n=[[]],r=[""];var e=[""];artistNames=[""];for(var a=0;a<t.length;a++){var i=[parseInt(t[a].Streams),10-a+""],l=t[a]["Track Name"];e[a]=l,r[a]=l,artistNames[a]=t[a].Artist,n[a]=i}c.domain([0,d3.max(n,function(t){return t[0]})]),d.domain(d3.range(1,n.length+1)),v(n),console.log(u);for(a=0;a<r.length;a++){l=r[a];if(6*r[a].length>u[a]){var o=(6*r[a].length-u[a])/6;console.log(l.length),console.log(o),r[a]=l.substring(0,l.length-2-o)+"..."}}h(e,n,artistNames,r),console.log(m)}slider=function(){var t,e;return{getDate:function(){return d3.timeFormat("%Y-%m-%d")(t.value())},initSlider:function(){var a=d3.range(0,53).map(function(t){return new Date(2019,0,1+7*t)}),n=d3.range(0,12).map(function(t){return new Date(2019,t,1)});t=d3.sliderBottom().min(d3.min(a)).max(d3.max(a)).step(12).width(770-l.left-l.right).tickValues(n).tickFormat(d3.timeFormat("%b")).displayValue(!1).on("onchange",function(t){d3.select("div#date-display").text(d3.timeFormat("%Y-%m-%d")(t)),e=d3.timeFormat("%Y-%m-%d")(t),y(g.filter(function(t){for(var a=0;a<g.length;a++)return t.date===e}))});var r=d3.select("div#slider").append("svg").attr("width",900-l.left-l.right).attr("height",100-l.top-l.bottom).append("g").attr("transform","translate(30,10)");r.call(t),r.selectAll("text").attr("dx","-10px").attr("dy","-16px"),d3.select("div#date-display").text(d3.timeFormat("%Y-%m-%d")(t.value()))}}}(),p();
},{}]},{},["Focm"], null)
//# sourceMappingURL=https://uw-cse442-wi20.github.io/A3-Spotify-2019-streaming/src.0b531a8f.js.map